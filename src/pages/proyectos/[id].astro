---
import { getCollection, render } from "astro:content"
import Layout from "../../layouts/Layout.astro"
import Link from "../../components/Link.astro"

export async function getStaticPaths() {
	const proyectos = await getCollection("proyectos")

	return proyectos.map((proyecto) => ({
		params: {
			id: proyecto.slug,
		},
		props: { proyecto },
	}))
}

const { proyecto } = Astro.props
const { data, slug } = proyecto
const { title, url } = data

export const prerender = true

const { Content } = await render(proyecto)
---

<Layout title={title}>
	<div class="flex gap-12">
		<main class="max-w-3xl">
			<h1
				transition:name={`title-${slug}`}
				class="text-3xl md:text-4xl font-bold mb-10">
				<a
					href={url}
					target="_blank"
					rel="noopener noreferrer"
					class="flex gap-2">
					{title}
					{url && <Link />}
				</a>
			</h1>
			<div class="prose prose-invert">
				<Content />
			</div>
		</main>
	</div>
</Layout>
